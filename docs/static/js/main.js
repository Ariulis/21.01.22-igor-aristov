const ibgElements=document.querySelectorAll(".ibg"),navigate=document.querySelector(".navigate"),isMobile=/Android|webOS|iPhone|iPad|iPod|BlackBerry|BB|PlayBook|IEMobile|Windows Phone|Kindle|Silk|Opera Mini/i.test(navigator.userAgent),body=document.body,menuLinkGoTo=document.querySelectorAll("[data-goto]"),menuLinks=document.querySelectorAll(".menu__link"),navigateObject=document.querySelector(".navigate"),goTopButton=document.querySelector(".go-top"),headerElement=document.querySelector("header"),menuBurger=document.querySelector(".menu-icon"),menu=document.querySelector(".menu__list"),headerBody=document.querySelector(".header__body"),sections=document.querySelectorAll("section"),copyBlock=document.querySelector(".footer__copy"),moneyBlock=document.querySelector(".icon-money"),phoneInput=document.querySelectorAll('input[name="phone"]'),im=new Inputmask("+99 (999) 999-99-99"),form=document.querySelector(".contacts__form"),contactsSection=document.querySelector(".contacts");async function formSend(e){e.preventDefault();var t=formValidate(form),e=new FormData(form);if(0===t){const o=await fetch("phpmailer/sendmail.php",{method:"POST",body:e});o.ok?(e=await o.json(),alert(e.message),formPreview.innerHTML="",form.reset()):(form.reset(),alert("Error!")),contactsSection.classList.remove("sending")}}function formValidate(e){let t=0;var o=e.querySelectorAll(".validate");for(let e=0;e<o.length;e++){const n=o[e];formRemovError(n),n.classList.contains("req")&&""===n.value?(formAddError(n),t++,n.nextElementSibling.innerHTML="Это поле нужно заполнить",n.nextElementSibling.style.display="block"):n.classList.contains("email")&&isEmail(n)&&(formAddError(n),t++,n.nextElementSibling.innerHTML="Введите корректый email",n.nextElementSibling.style.display="block")}return t}function formAddError(e){e.parentElement.classList.add("error"),e.classList.add("error")}function formRemovError(e){e.parentElement.classList.remove("error"),e.classList.remove("error"),e.nextElementSibling.style.display="none"}function isEmail(e){return!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,8})+$/.test(e.value)}if(im.mask(phoneInput),form.addEventListener("submit",formSend),document.addEventListener("click",function(e){e.target.classList.contains("icon-money")&&e.target.classList.toggle("active")}),copyBlock){const o=copyBlock.innerHTML;copyBlock.innerHTML=(new Date).getFullYear()+" "+o}function clickMenuBurger(){menuBurger.classList.toggle("active"),body.classList.toggle("_lock"),menu.classList.toggle("_open"),navigateObject.classList.toggle("_open")}function smoothScrollEvent(e){e.preventDefault();const t=e.target,o=t.classList.contains("go-top")?"header":t.dataset.goto,n=document.querySelector(o).getBoundingClientRect().top,i=navigateObject.offsetHeight;distance=t.classList.contains("go-top")?n+scrollY:n+scrollY-i,window.scrollTo({top:distance,behavior:"smooth"})}function toggleActiveClassMenuLink(o){const n=navigateObject.clientHeight;sections.forEach((e,t)=>{e.offsetTop-n-50<=o&&(removeClassInArrElements(menuLinks,"active"),menuLinks[t].classList.add("active"))}),headerElement.clientHeight-100>=o&&removeClassInArrElements(menuLinks,"active")}function removeClassInArrElements(e,t){e.forEach(e=>{e.classList.contains(t)&&e.classList.remove(t)})}function goTopButtonFunction(){300<window.pageYOffset?goTopButton.classList.contains("go-top-entrance")||(goTopButton.classList.remove("go-top-exit"),goTopButton.classList.add("go-top-entrance"),goTopButton.style.display="block"):goTopButton.classList.contains("go-top-entrance")&&(goTopButton.classList.remove("go-top-entrance"),goTopButton.classList.add("go-top-exit"),setTimeout(function(){goTopButton.style.display="none"},350))}menuBurger.addEventListener("click",clickMenuBurger),0<menuLinkGoTo.length&&menuLinkGoTo.forEach(e=>{e.addEventListener("click",function(e){smoothScrollEvent(e),menuBurger.classList.contains("active")&&clickMenuBurger()})}),document.addEventListener("DOMContentLoaded",function(){isMobile?body.classList.add("_touch"):body.classList.add("_pc")}),0<ibgElements.length&&ibgElements.forEach(e=>{var t;e.querySelector("img")&&(t=e.querySelector("img").getAttribute("src"),e.style.setProperty("background-image",`url(${t})`))}),goTopButton.addEventListener("click",smoothScrollEvent),window.addEventListener("scroll",function(){var e=this.scrollY;80<e?navigateObject.classList.add("scroll"):navigateObject.classList.remove("scroll"),goTopButton&&goTopButtonFunction(),body.classList.contains("_pc")&&toggleActiveClassMenuLink(e)});const swiper=new Swiper(".swiper-container",{autoHeight:!0,slidesPerView:1,speed:800,pagination:{el:".swiper-pagination",type:"bullets",clickable:!0},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}});